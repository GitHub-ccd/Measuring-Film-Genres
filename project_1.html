<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript" src="d3.min.js"></script>

    <style type="text/css">

			body {
				text-align: center;
			}

			article {
			    width: 50%;
			    margin: 0 auto;
			}

			p {
				font-size: 25px;
			    text-align: left;
			}

			p.center {
				font-size: 25px;
				text-align: center;
			}

			span {
				font-size: 25px;
			    text-align: center;
			    color:red; 
				background-color: #ffcaca;
				background-image:url(/Content/x.png);
				background-size: 20px 20px;
				background-repeat:no-repeat;
				background-position:2px;
				padding: 5px;
				border-radius: 5px 5px 5px;
				border: 1px solid red;
				padding-left: 5px;
				padding-right: 5px;
				position:relative;
  				cursor: pointer;
			}

			h1{
				font-size: 100px;
			}

			rect:hover {
				fill: orange;
			}

			text{
				pointer-events:none;
			}

		</style>

  </head>
  <body>
  	<h1>Measuring Film Genres</h1>
    <h2>Is It Possible To Quantify The Degree To Which A Film Is An Action?</h2>
    <h3>By <a href="https://www.ogladfelter.com/" target="_blank">Oliver Gladfelter</a></h3>

    <article>
    	<p>A few months ago, two of my friends got into an argument over whether <em>Avengers: Infinity War</em> was a fantasy or a science-fiction film. Deciding to use a credible source to settle their debate, we turned to IMDb, which conveniently cross-lists the movie under <em>both</em> genres. Thus, the debate evolved (devolved?) into whether the film is <em>more</em> fantasy or <em>more</em> sci-fi.</p>
    	<p>IMDb will tell you what genre any movie falls under, but not to what extent. That is, we can agree <em>Inception</em> and <em>Star Trek</em> are both sci-fi films, but who’s to say which is <strong>more</strong> sci-fi? And no, not which film is more futuristic or extraterrestrial - rather, which film better represents science-fiction as a genre, more strongly captures the elements commonly seen throughout the genre. If you were to define “sci-fi” to a young child, which film would you use as an example?</p>
    	<p>Up until now, there’s been no quantifying movie genre classifications. A movie is either a fantasy, or it isn’t. A movie is either a sci-fi, or it isn’t. To get my friends to shut up about <em>Avengers</em>, I had to change that.</p>
    	<img src="movieRadar.png" width="100%">
    	<p>So not only is <em>Avengers: Infinity War</em> more sci-fi than fantasy, it’s also more action and adventure than fantasy. The applications of genre measuring go beyond settling debates, however. Instead of comparing different genre percentages within a single film, we can compare absolute values across all films we’ve collected data on. This reveals which movies are the most defining of any genre of interest. As stated above, “most horror” should not be thought of as scariest, and “most comedy” not as funniest - just the most genre defining.</p>
	</article>

 	<article>
		<p class = "center">Click on any genre to view it's most defining films:</p>
		<span id="actionFilms">Action</span>
		<span id="sciFiFilms">Sci-Fi</span>
		<span id="horrorFilms">Horror</span>
		<span id="romanceFilms">Romance</span>
		<p></p>
		<span id="comedyFilms">Comedy</span>
		<span id="dramaFilms">Drama</span>
		<span id="fantasyFilms">Fantasy</span>
		<span id="thrillerFilms">Thriller</span>
		<span id="adventureFilms">Adventure</span>

	</article>

	<script>

			d3.selectAll("span")
				.on("click", function() {

					//See which p was clicked
					var spanID = d3.select(this).attr("id");

					if (spanID == "actionFilms") {
						//New values for dataset
						newData = [.389, .383, .379, .377, .372, .369, .369, .368, .368, .366];
						newLabels = ["Out for Blood (1992)", "American Kickboxer 2 (1993)", "Striking Range (2006)", "Missing in Action 2: The Beginning (1985)", "Storm Catcher (1999)",
							"The King of the Kickboxers (1990)", "American Ninja 4: The Annihilation (1990)", "Knock Off (1998)", "Night Hunter (1996)", "No Retreat, No Surrender 2 (1987)"];
						genreLabel = "Action";
					}

					else if (spanID == "sciFiFilms") {
						//New values for dataset
						newData = [.392, .347, .340, .335, .331, .331, .330, .330, .324, .313];
						newLabels = ["Battle for Terra (2007)", "Dark Star (1974)", "Creature (1985)", "Starchaser: The Legend of Orin (1985)", "Contact (1997)",
							"Star Trek: The Motion Picture (1979)", "Magellan (2017)", "Sunshine (2007)", "The Black Hole (1979)", "Red Planet (2000)"];
						genreLabel = "Sci-Fi";
					}

					else if (spanID == "horrorFilms") {
						//New values for dataset
						newData = [.756, .533, .534, .515, .502, .496, .494, .493, .488, .480];
						newLabels = labels;
						genreLabel = "Horror";
					}

					else if (spanID == "romanceFilms") {
						//New values for dataset
						newData = [.404, .372, .366, .363, .359, .358, .357, .353, .349, .338];
						newLabels = ["Straight-Jacket (2004)", "Eating Out: Drama Camp (2011)", "I Want Your Love (2012)", "A Very Natural Thing (1974)", "The Big Gay Musical (2009)", "Magic in the Moonlight (2014)", "The Age of Innocence (1993)", "Gayby (2012)", "After Sex (2007)", "Untitled (2009)"];
						genreLabel = "Romance";
					}

					else if (spanID == "comedyFilms") {
						//New values for dataset
						newData = [.444,.420,.374,.371,.356,.355,.354,.347,.345,.341];
						newLabels = ["The Internship (2013)", "The Benchwarmers (2006)", "Wild Cherry (2009)", "House Broken (2010)", "To Rome with Love (2012)", "The Slammin' Salmon (2009)", "Lost in America (1985)", "Mystery Team (2009)", "Ferris Bueller's Day Off (1986)", "Another Gay Movie (2006)"];
						genreLabel = "Comedy";
					}

					else if (spanID == "dramaFilms") {
						//New values for dataset
						newData = [.525,.398,.398,.397,.392,.378,.374,.370,.369,.369];
						newLabels = ["The Man Who Knew Infinity (2015)", "The Other Man (2008)", "Jobs (2013)", "Invictus (2009)", "AWOL (2016)", "Leapin' Leprechauns! (1995)", "Nixon (1995)", "Christmas Mail (2010)", "Luna (1997)", "Hidden Figures (2016)"];
						genreLabel = "Drama";
					}

					else if (spanID == "fantasyFilms") {
						//New values for dataset
						newData = [.365,.331,.330,.326,.318,.317,.309,.296,.292,.289];
						newLabels = ["Maleficent (2014)", "Shrek Forever After (2010)", "Alice Through the Looking Glass (2016)", "Dragon Age: Dawn of the Seeker (2012)", "Harry Potter and the Chamber of Secrets (2002)", "The Lord of the Rings (1978)", "Beowulf & Grendel (2005)", "Frozen (2013)", "The Dark Mist (1996)", "Wizards of the Lost Kingdom (1985)"];
						genreLabel = "Fantasy";
					}

					else if (spanID == "thrillerFilms") {
						//New values for dataset
						newData = [.326,.304,.304,.285,.283,.281,.281,.278,.274,.273];
						newLabels = ["The Anderson Tapes (1971)", "Borderline (1980)", "Unthinkable (2010)", "Evidence (2013)", "Emmett's Mark (2002)", "Sin City (2005)", "Vile (2011)", "When a Stranger Calls (1979)", "In the Electric Mist (2009)", "The Adventures of Ford Fairlane (1990)"];
						genreLabel = "Thriller";
					}
					
					else if (spanID == "adventureFilms") {
						//New values for dataset
						newData = [.389,.381,.324,.316,.314,.311,.310,.303,.296,.294];
						newLabels = ["White Fang (1991)", "The Pirates! Band of Misfits (2012)", "The Golden Voyage of Sinbad (1973)", "The Jungle Book 2 (2003)", "The Jungle Book (2016)", "Ice Age: Continental Drift (2012)", "Cutthroat Island (1995)", "Grizzly Mountain (1996)", "Return to Never Land (2002)", "Penguins of Madagascar (2014)"];
						genreLabel = "Adventure";
					}

					fig1Label.text('The "Most ' + genreLabel + '" Films');

					xScale = d3.scaleLinear()
								.domain([0, d3.max(newData, function(d) { return d; })])
								.range([0, w]);

					//Update all labels
					svg.selectAll("text")
					   .data(newLabels)
					   .transition()
					   .text(function(d) {
					   		return d;
					   })
					   .attr("x", 5)
					   .attr("y", function(d, i) {
					   		return i * (h / newLabels.length) + (h / newLabels.length / 2);
					   })
					   .attr("font-family", "sans-serif")
					   .attr("font-size", "18px")
					   .attr("fill", "white")
					   .style("dominant-baseline", "middle");

					//Update all rects
					svg.selectAll("rect")
						.data(newData)
						.transition()
						.attr("y", function(d, i) {
						   		return i * (h / newData.length);
						   })
						   .attr("x", 0)
						   .attr("height", h / newData.length)
						   .attr("width", function(d) {
						   		return xScale(d);
						   })
						   .attr("fill", function(d) {
								return "rgb(0, 0, " + Math.round(d * 255) + ")";
						   })
						   .select("title")
						   .text(function(d) {
						   		return genreLabel + " Level: " + d + " / 1";
						   });
					});




	</script>

	<script>

		var fig1Label = d3.select("body").append("h2")

		fig1Label.text('The "Most Horror" Films');

		//Width and height
		var h = 500;
		var w = 500;
		var barPadding = 1;

		var dataset = [.756, .533, .534, .515, .502, .496, .494, .493, .488, .480];

		var xScale = d3.scaleLinear()
			.domain([0, d3.max(dataset, function(d) { return d; })])
			.range([0, w]);
			
			//Create SVG element
		var svg = d3.select("body")
			.append("svg")
			.attr("width", w)
			.attr("height", h);

		svg.selectAll("rect")
			.data(dataset)
			.enter()
			.append("rect")
			.attr("y", function(d, i) {
			   		return i * (h / dataset.length);
			   })
			   .attr("x", 0)
			   .attr("height", h / dataset.length)
			   .attr("width", function(d) {
			   		return xScale(d);
			   })
			   .attr("fill", function(d) {
					return "rgb(0, 0, " + Math.round(d * 255) + ")";
			   })
			   .append("title")
			   .text(function(d) {
			   		return "Horror Level: " + d + " / 1";
			   });

			var labels = ["Hell Fest (2018)","Friday the 13th Part III (1982)", "Wacko (1982)", "Friday the 13th: The Final Chapter (1984)", "Old 37 (2015)", "Drive-In Horrorshow (2009)",
				"The Love Butcher (1975)", "Blood Rage (1987)", "Madman (1981)", "I Dismember Mama (1972)"];

			svg.selectAll("text")
			   .data(labels)
			   .enter()
			   .append("text")
			   .text(function(d) {
			   		return d;
			   })
			   .attr("x", 5)
			   .attr("y", function(d, i) {
			   		return i * (h / dataset.length) + (h / dataset.length / 2);
			   })
			   .attr("font-family", "sans-serif")
			   .attr("font-size", "18px")
			   .attr("fill", "white")
			   .style("dominant-baseline", "middle")
			   .append("title")
			   .text(function(d, i) {
			   		return "Horror Level: " + dataset[i] + " / 1";
			   });

	</script>

	<article>
		<p>Conclusion</p>
	</article>
  </body>
</html>
