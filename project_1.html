<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript" src="d3.min.js"></script>

    <style type="text/css">

			body {
				text-align: center;
			}

			article {
			    width: 50%;
			    margin: 0 auto;
			}

			p {
				font-size: 25px;
			    text-align: left;
			}

			p.center {
				font-size: 25px;
				text-align: center;
			}

			span {
				font-size: 25px;
			    text-align: center;
			    color:red; 
				background-color: #ffcaca;
				background-image:url(/Content/x.png);
				background-size: 20px 20px;
				background-repeat:no-repeat;
				background-position:2px;
				padding: 5px;
				border-radius: 5px 5px 5px;
				border: 1px solid red;
				padding-left: 5px;
				padding-right: 5px;
				position:relative;
  				cursor: pointer;
			}

			h1{
				font-size: 100px;
			}

			rect:hover {
				fill: orange;
			}

			text{
				pointer-events:none;
			}

		</style>

  </head>
  <body>
  	<h1>Measuring Film Genres</h1>
	<h2>Is It Possible To Quantify How 'Action' A Film Is?</h2>
    <h3>By <a href="https://www.ogladfelter.com/" target="_blank">Oliver Gladfelter</a></h3>

    <article>
    	<p>A few months ago, two of my friends got into an argument over whether <em>Avengers: Infinity War</em> was a fantasy or a science-fiction film. Deciding to use a credible source to settle their debate, we turned to IMDb, which conveniently cross-lists the movie under <em>both</em> genres. Thus, the debate evolved (devolved?) into whether the film is <em>more</em> fantasy or <em>more</em> sci-fi.</p>
    	<p>IMDb will tell you what genre any movie falls under, but not to what extent. That is, we can agree <em>Inception</em> and <em>Star Trek</em> are both sci-fi films, but who’s to say which is <strong>more</strong> sci-fi? And no, not which film is more futuristic or extraterrestrial - rather, which film more represents science-fiction as a genre, more strongly captures the elements commonly seen throughout the genre. If you were to define “sci-fi” to a young child, which film would you use as an example?</p>
    	<p>Up until now, there’s been no quantifying movie genre classifications. A movie is either a fantasy, or it isn’t. A movie is either a sci-fi, or it isn’t. To get my friends to shut up about <em>Avengers</em>, I had to change that.</p>
    	<img src="movieRadar.png" width="100%">
    	<p>So not only is <em>Avengers: Infinity War</em> more sci-fi than fantasy, it’s also more action and adventure than fantasy. The applications of genre measuring go beyond settling debates, however. Instead of comparing different genre percentages within a single film, we can compare absolute values across all films we’ve collected data on. This reveals which movies are the most defining of any genre of interest. As stated above, “most horror” should not be thought of as scariest, and “most comedy” not as funniest - just the most genre defining.</p>
	</article>

 	<article>
		<p class = "center">Click on any genre to view it's most defining films:</p>
		<span id="actionFilms">Action</span>
		<span id="sciFiFilms">Sci-Fi</span>
		<span id="horrorFilms">Horror</span>
		<p></p>
		<span id="comedyFilms">Comedy</span>
		<span id="dramaFilms">Drama</span>
		<span id="fantasyFilms">Fantasy</span>
		<span id="thrillerFilms">Thriller</span>

	</article>

	<script>

			d3.selectAll("span")
				.on("click", function() {

					//See which p was clicked
					var spanID = d3.select(this).attr("id");

					if (spanID == "actionFilms") {
						//New values for dataset
						newData = [1.138,1.092,1.05,1.048,1.046,1.043,1.023,1.012,1.006,1.002];
						newLabels = ["Broken Arrow (1996)", "RED 2 (2013)", "Rambo: First Blood Part II (1985)", "Under Siege (1992)", "Rambo III (1988)", "The Chronicles of Riddick (2004)", "Die Another Day (2002)", "The Expendables 2	(2012)", "xXx: State of the Union (2005)", "Behind Enemy Lines (2001)" ];
						genreLabel = "Action";
					}

					else if (spanID == "sciFiFilms") {
						//New values for dataset
						newData = [1.532,1.318,1.296,1.241,1.196,1.183,1.173,1.163,1.128,1.109];
						newLabels = ["Red Planet (2000)", "Star Trek: The Motion Picture (1979)", "Star Trek: Insurrection (1998)", "Star Trek V: The Final Frontier (1989)", "Final Fantasy: The Spirits Within (2001)", "Star Trek: Generations (1994)", "Stargate (1994)", "Star Trek: First Contact (1996)", "Alien³ (1992)", "Sunshine (2007)"];
						genreLabel = "Sci-Fi";
					}

					else if (spanID == "horrorFilms") {
						//New values for dataset
						newData = [1.605,1.596,1.530,1.391,1.387,1.361,1.345,1.319,1.287,1.246];
						newLabels = labels;
						genreLabel = "Horror";
					}

					else if (spanID == "comedyFilms") {
						//New values for dataset
						newData = [.845,.777,.724,.704,.698,.694,.661,.654,.642,.633];
						newLabels = ["The Edge of Seventeen (2016)", "Tenacious D in The Pick of Destiny (2006)", "Hall Pass (2011)", "American Reunion	(2012)", "Sex Drive	(2008)", "American Pie 2 (2001)", "Good Luck Chuck (2007)", "The Heartbreak Kid	(2007)", "Turbo	(2013)", "Music and Lyrics (2007)"];
						genreLabel = "Comedy";
					}

					else if (spanID == "dramaFilms") {
						//New values for dataset
						newData = [.957,.924,.762,.740,.698,.695,.694,.681,.671,.668];
						newLabels = ["Men of Honor (2000)", "The Big Sick (2017)", "Marley & Me (2008)", "12 Years a Slave (2013)", "The Graduate (1967)", "The Pursuit of Happyness (2006)", "Hidden Figures (2016)", "Bohemian Rhapsody (2018)", "Walk the Line (2005)", "Julie & Julia (2009)"];
						genreLabel = "Drama";
					}

					else if (spanID == "fantasyFilms") {
						//New values for dataset
						newData = [1.288,1.191,1.187,1.124,1.062,1.032,1.002,.941,.931,.920];
						newLabels = ["Shrek Forever After (2010)", "The Sword in the Stone (1963)", "Maleficent (2014)", "Sleeping Beauty (1959)", "Frozen (2013)", "Kubo and the Two Strings (2016)", "Night at the Museum: Secret of the Tomb (2014)", "Snow White and the Huntsman (2012)", "Legend (1985)", "Cinderella (1950)"];
						genreLabel = "Fantasy";
					}

					else if (spanID == "thrillerFilms") {
						//New values for dataset
						newData = [.664,.631,.621,.608,.594,.594,.593,.578,.574,.573];
						newLabels = ["Assault on Precinct 13 (2005)", "Unthinkable (2010)", "RED 2 (2013)", "Snake Eyes (1998)", "Fargo (1996)", "The Negotiator (1998)", "Safe House (2012)", "Mississippi Burning (1988)", "Taxi Driver (1976)", "Edge of Darkness (2010)"];
						genreLabel = "Thriller";
					}
					

					fig1Label.text('The "Most ' + genreLabel + '" Films');

					xScale = d3.scaleLinear()
								.domain([0, d3.max(newData, function(d) { return d; })])
								.range([0, w]);

					//Update all labels
					svg.selectAll("text")
					   .data(newLabels)
					   .transition()
					   .text(function(d) {
					   		return d;
					   })
					   .attr("x", 5)
					   .attr("y", function(d, i) {
					   		return i * (h / newLabels.length) + (h / newLabels.length / 2);
					   })
					   .attr("font-family", "sans-serif")
					   .attr("font-size", "18px")
					   .attr("fill", "white")
					   .style("dominant-baseline", "middle");

					//Update all rects
					svg.selectAll("rect")
						.data(newData)
						.transition()
						.attr("y", function(d, i) {
						   		return i * (h / newData.length);
						   })
						   .attr("x", 0)
						   .attr("height", h / newData.length)
						   .attr("width", function(d) {
						   		return xScale(d);
						   })
						   .attr("fill", function(d) {
								return "rgb(0, 0, " + Math.round(d * 255) + ")";
						   })
						   .select("title")
						   .text(function(d) {
						   		return genreLabel + " Level: " + d;
						   });
					});




	</script>

	<script>

		var fig1Label = d3.select("body").append("h2")

		fig1Label.text('The "Most Horror" Films');

		//Width and height
		var h = 500;
		var w = 500;
		var barPadding = 1;

		var dataset = [1.605,1.596,1.530,1.391,1.387,1.361,1.345,1.319,1.287,1.246];

		var xScale = d3.scaleLinear()
			.domain([0, d3.max(dataset, function(d) { return d; })])
			.range([0, w]);
			
			//Create SVG element
		var svg = d3.select("body")
			.append("svg")
			.attr("width", w)
			.attr("height", h);

		svg.selectAll("rect")
			.data(dataset)
			.enter()
			.append("rect")
			.attr("y", function(d, i) {
			   		return i * (h / dataset.length);
			   })
			   .attr("x", 0)
			   .attr("height", h / dataset.length)
			   .attr("width", function(d) {
			   		return xScale(d);
			   })
			   .attr("fill", function(d) {
					return "rgb(0, 0, " + Math.round(d * 255) + ")";
			   })
			   .append("title")
			   .text(function(d) {
			   		return "Horror Level: " + d;
			   });

			var labels = ["Se7en (1995)", "Final Destination 5 (2011)", "Halloween H20: 20 Years Later (1998)", "Saw VI	(2009)", "The Nun (2018)", "Friday the 13th	(2009)", "Annabelle: Creation (2017)", "The Evil Dead (1981)", "The Hills Have Eyes II (2007)", "Paranormal Activity 4 (2012)"];

			svg.selectAll("text")
			   .data(labels)
			   .enter()
			   .append("text")
			   .text(function(d) {
			   		return d;
			   })
			   .attr("x", 5)
			   .attr("y", function(d, i) {
			   		return i * (h / dataset.length) + (h / dataset.length / 2);
			   })
			   .attr("font-family", "sans-serif")
			   .attr("font-size", "18px")
			   .attr("fill", "white")
			   .style("dominant-baseline", "middle")
			   .append("title")
			   .text(function(d, i) {
			   		return "Horror Level: " + dataset[i] + " / 1";
			   });

	</script>

	<article>
		<p>Conclusion</p>
	</article>
  </body>
</html>
